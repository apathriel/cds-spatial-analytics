library(knitr)
library(rmdformats)
## Global options
options(max.print="75")
opts_chunk$set(echo=TRUE,
cache=TRUE,
prompt=FALSE,
tidy=TRUE,
comment=NA,
message=FALSE,
warning=FALSE)
opts_knit$set(width=75)
library(sf)
library(raster)
library(raster)
library(tmap)
library(googlesheets4)
library(tidyverse)
# get elevation
elevation <- raster("../data/DNK_msk_alt.grd")
# get counties
counties <- readRDS("../data/gadm36_DNK_2_sp.rds")
?readrds
?readRDS
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "elev",
style = "cont",
palette = "BuGn") +
tm_shape(counties) +
tm_borders(col = "red",
lwd = 3) +
tm_scale_bar(breaks = c(0, 100, 200),
text.size = 1) +
tm_compass(position = c("LEFT", "center"),
type = "rose",
size = 2) +
tm_credits(text = "A. Sobotkova, 2024") +
tm_layout(main.title = "My terrible map",
bg.color = "orange",
inner.margins = c(0, 0, 0, 0))
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "elev",
style = "cont",
palette = "BuGn") +
tm_shape(counties) +
tm_borders(col = "red",
lwd = 3) +
tm_scale_bar(breaks = c(0, 100, 200),
text.size = 1) +
tm_compass(position = c("LEFT", "center"),
type = "rose",
size = 2) +
tm_credits(text = "A. Sobotkova, 2024") +
tm_layout(main.title = "Denmark municipalities",
bg.color = "orange",
inner.margins = c(0, 0, 0, 0))
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "elev",
style = "cont",
palette = "BuGn") +
tm_shape(counties) +
tm_borders(col = "red",
lwd = 3) +
tm_scale_bar(breaks = c(0, 100, 200),
text.size = 1) +
tm_compass(position = c("LEFT", "center"),
type = "rose",
size = 2) +
tm_credits(text = "G.H. Andersen, 26-02-2024") +
tm_layout(main.title = "Denmark municipalities",
bg.color = "orange",
inner.margins = c(0, 0, 0, 0))
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "elev",
style = "cont",
palette = "-RdYlGn") +
tm_shape(counties) +
tm_borders(col = "red",
lwd = 3) +
tm_scale_bar(breaks = c(0, 100, 200),
text.size = 1) +
tm_compass(position = c("LEFT", "center"),
type = "rose",
size = 2) +
tm_credits(text = "G.H. Andersen, 26-02-2024") +
tm_layout(main.title = "Denmark municipalities",
bg.color = "orange",
inner.margins = c(0, 0, 0, 0))
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "elev",
style = "cont",
palette = "-RdYlGn") +
tm_shape(counties) +
tm_borders(col = "red",
lwd = 3) +
tm_scale_bar(breaks = c(0, 100, 200),
text.size = 1) +
tm_compass(position = c("TOP", "center"),
type = "rose",
size = 2) +
tm_credits(text = "G.H. Andersen, 26-02-2024") +
tm_layout(main.title = "Denmark municipalities",
bg.color = "orange",
inner.margins = c(0, 0, 0, 0))
?tm_compass
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "elev",
style = "cont",
palette = "-RdYlGn") +
tm_shape(counties) +
tm_borders(col = "red",
lwd = 3) +
tm_scale_bar(breaks = c(0, 100, 200),
text.size = 1) +
tm_compass(position = c("RIGHT", "TOP"),
type = "rose",
size = 2) +
tm_credits(text = "G.H. Andersen, 26-02-2024") +
tm_layout(main.title = "Denmark municipalities",
bg.color = "orange",
inner.margins = c(0, 0, 0, 0))
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "Elevation (masl)",
style = "cont",
palette = "-RdYlGn") +
tm_shape(counties) +
tm_borders(col = "red",
lwd = 3) +
tm_scale_bar(breaks = c(0, 100, 200),
text.size = 1) +
tm_compass(position = c("RIGHT", "TOP"),
type = "rose",
size = 2) +
tm_credits(text = "G.H. Andersen, 26-02-2024") +
tm_layout(main.title = "Denmark municipalities",
bg.color = "orange",
inner.margins = c(0, 0, 0, 0))
?tm_scale_bar
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "Elevation (masl)",
style = "cont",
palette = "-RdYlGn") +
tm_shape(counties) +
tm_borders(col = "red",
lwd = 3) +
tm_scale_bar(breaks = c(0, 50, 100, 150, 200),
text.size = 1, position = c('RIGHT', 'TOP')) +
tm_compass(position = c("RIGHT", "TOP"),
type = "rose",
size = 2) +
tm_credits(text = "G.H. Andersen, 26-02-2024") +
tm_layout(main.title = "Denmark municipalities",
bg.color = "orange",
inner.margins = c(0, 0, 0, 0))
tm_compass(position = c("RIGHT", "TOP"),
type = "rose",
size = 2)
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "Elevation (masl)",
style = "cont",
palette = "-RdYlGn") +
tm_shape(counties) +
tm_borders(col = "red",
lwd = 3) +
tm_scale_bar(breaks = c(0, 50, 100, 150, 200),
text.size = 1, position = c('RIGHT', 'TOP')) +
tm_compass(position = c("RIGHT", "TOP"),
type = "rose",
size = 2) +
tm_credits(text = "G.H. Andersen, 26-02-2024") +
tm_layout(main.title = "Denmark municipalities",
bg.color = "orange",
inner.margins = c(0, 0, 0, 0))
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "Elevation (masl)",
style = "cont",
palette = "-RdYlGn") +
tm_shape(counties) +
tm_borders(col = "black",
lwd = 2) +
tm_scale_bar(breaks = c(0, 50, 100, 150, 200),
text.size = 1, position = c('RIGHT', 'TOP')) +
tm_compass(position = c("RIGHT", "TOP"),
type = "rose",
size = 2) +
tm_credits(text = "G.H. Andersen, 26-02-2024") +
tm_layout(main.title = "Denmark municipalities",
bg.color = "orange",
inner.margins = c(0, 0, 0, 0))
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "Elevation (masl)",
style = "cont",
palette = "-RdYlGn") +
tm_shape(counties) +
tm_borders(col = "black",
lwd = 1) +
tm_scale_bar(breaks = c(0, 50, 100, 150, 200),
text.size = 1, position = c('RIGHT', 'TOP')) +
tm_compass(position = c("RIGHT", "TOP"),
type = "rose",
size = 2) +
tm_credits(text = "G.H. Andersen, 26-02-2024") +
tm_layout(main.title = "Denmark municipalities",
bg.color = "white",
inner.margins = c(0, 0, 0, 0))
places <- read_sheet("https://docs.google.com/spreadsheets/d/1PlxsPElZML8LZKyXbqdAYeQCDIvDps2McZx1cTVWSzI/edit#gid=1817942479",
range = "SA2024",
col_types = "cccnncnc")
places <- read_sheet("https://docs.google.com/spreadsheets/d/1PlxsPElZML8LZKyXbqdAYeQCDIvDps2McZx1cTVWSzI/edit#gid=1817942479",
range = "SA2024",
col_types = "cccnncnc")
# Load the first 5000 rows in .csv-file and save it as "nitrates":
nitrates <- read_csv("../data/nitrate.csv") %>%
slice(1:5000)
View(nitrates)
View(nitrates)
View(places)
?st_as_sf
places_sf <- places %>%
filter(!is.na(places$CoordinatesFILLTHIS)) %>%
st_as_sf(coords = c(Latitude,Longitude))
places_sf <- places %>%
filter(!is.na(places$CoordinatesFILLTHIS)) %>%
st_as_sf(coords = c(places$Latitude, places%Longitude))
View(nitrates)
nitrates_sf <- st_as_sf(nitrates, wkt = "WTK")
nitrates_sf <- st_as_sf(nitrates, wkt = "WKT")
places_sf <- places %>%
filter(!is.na(places$CoordinatesFILLTHIS)) %>%
st_as_sf(coords = c("Latitude", "Longitude"))
View(places_sf)
?filter
View(places)
View(places_sf)
View(places)
View(places)
show(places)
# /Start Code / #
show(places_sf)
# /Start Code / #
show(places_sf)
show(nitrates_sf)
str(places_sf)
head(places_sf)
head(nitrates_sf)
# both use point it seems
crs(places_sf)
# both use point it seems
st_crs(places_sf)
st_crs(nitrates_sf))
st_crs(nitrates_sf)
crs(nitrates_sf)
head(places_sf)
View(elevation)
show(elevation)
head(elevation)
View(elevation)
plot(places_sf)
plot(places_sf[geometry])
plot(places_sf$geometry)
plot(nitrates_sf$WKT)
plot(elevation)
?plot
plot(places_sf$geometry, add = TRUE)
plot(elevation)
# i assume all columns that are NOT geometry can be considered attributes?
head(places_sf)
# /Start Code / #
# can use View, str, show, head, or plot functions to inspect the data
show(places_sf)
# i assume all columns that are NOT geometry can be considered attributes?
head(places_sf)
head(places_sf)
places4326 <- places_sf %>% st_set_crs(4326)
nitrates25832 <- nitrates_sf %>% st_set_crs(25832)
places4326
nitrates25832
# /Start Code / #
nitrates_4326 <- st_transform(nitrates25832, 4326)
head(nitrates)
?st_transform
head(nitrates_4326)
pipess <- nitrates25832 %>% st_transform(4326)
View(pipess)
head(pipess)
# /Start Code / #
nitrates_4326 <- nitrates25832 %>% st_transform(4326)
# /Start Code / #
nitrates_4326 <- nitrates25832 %>% st_transform(dst = 4326)
head(nitrates_4326)
# /Start Code / #
nitrates_4326 <- nitrates25832 %>% st_transform(4326)
head(nitrates_4326)
# /Start Code / #
nitrates_4326 <- nitrates25832 %>% st_transform(crs = 4326)
head(nitrates_4326)
plot(places4326$geometry)
plot(nitrates_4326$geometry, add = TRUE)
plot(places4326$geometry)
plot(nitrates_4326$geometry, add = TRUE)
View(places4326)
plot(places4326$geometry)
plot(nitrates_4326$geometry, add = TRUE)
plot(nitrates_4326$geometry)
plot(nitrates25832$geometry)
plot(nitrates)
plot(nitrates_4326$geometry)
View(nitrates_4326)
plot(nitrates_4326$WKT)
plot(places4326$geometry)
plot(places4326$geometry, add = TRUE)
plot(nitrates_4326$WKT)
plot(places4326$geometry, add = TRUE)
plot(places4326$geometry, col="green", add = TRUE)
plot(nitrates_4326$WKT)
plot(places4326$geometry, col="green", add = TRUE)
plot(places4326$geometry, lwd=10, col="green", add = TRUE)
plot(nitrates_4326$WKT)
plot(places4326$geometry, lwd=10, col="green", add = TRUE)
elevation_25832 <- projectRaster(elevation, crs = "+init=epsg:25832")
places_25832 <- st_transform(places4326, crs = 25832)
head(nitrates25832)
?projectRaster
crs(nitrates25832)
View(elevation_25832)
plot(elevation_25832)
plot(nitrates25832)
View(nitrates25832)
plot(elevation_25832)
plot(nitrates25832$WKT, add = TRUE)
?plot
plot(nitrates25832$WKT, lwd=1, add = TRUE)
plot(elevation_25832)
plot(nitrates25832$WKT, lwd=1, add = TRUE)
library(knitr)
library(rmdformats)
## Global options
options(max.print="75")
opts_chunk$set(echo=TRUE,
cache=TRUE,
prompt=FALSE,
tidy=TRUE,
comment=NA,
message=FALSE,
warning=FALSE)
opts_knit$set(width=75)
library(sf)
library(raster)
library(raster)
library(tmap)
library(googlesheets4)
library(tidyverse)
# get elevation
elevation <- raster("../data/DNK_msk_alt.grd")
# get counties
counties <- readRDS("../data/gadm36_DNK_2_sp.rds")
# starting a static map
tm_shape(elevation)  +
tm_raster(title = "Elevation (masl)",
style = "cont",
palette = "-RdYlGn") +
tm_shape(counties) +
tm_borders(col = "black",
lwd = 1) +
tm_scale_bar(breaks = c(0, 50, 100, 150, 200),
text.size = 1, position = c('RIGHT', 'TOP')) +
tm_compass(position = c("RIGHT", "TOP"),
type = "rose",
size = 2) +
tm_credits(text = "G.H. Andersen, 26-02-2024") +
tm_layout(main.title = "Denmark municipalities",
bg.color = "white",
inner.margins = c(0, 0, 0, 0))
places_sf <- places %>%
filter(!is.na(places$CoordinatesFILLTHIS)) %>%
st_as_sf(coords = c("Latitude", "Longitude"))
nitrates_sf <- st_as_sf(nitrates, wkt = "WKT")
# /Start Code / #
# can use View, str, show, head, or plot functions to inspect the data
show(places_sf)
show(nitrates_sf)
# i assume all columns that are NOT geometry can be considered attributes?
head(places_sf)
head(nitrates_sf)
# both use point it seems
st_crs(places_sf)
st_crs(nitrates_sf)
show(elevation)
plot(places_sf$geometry)
places4326 <- places_sf %>% st_set_crs(4326)
nitrates25832 <- nitrates_sf %>% st_set_crs(25832)
places4326
nitrates25832
# /Start Code / #
nitrates_4326 <- nitrates25832 %>% st_transform(crs = 4326)
plot(nitrates_4326$WKT)
plot(places4326$geometry, lwd=10, col="green", add = TRUE)
plot(nitrates_4326$WKT)
plot(places4326$geometry, lwd=10, col="green", add = TRUE)
elevation_25832 <- projectRaster(elevation, crs = "+init=epsg:25832")
elevation_25832 <- projectRaster(elevation, crs = "+init=epsg:25832")
places_25832 <- st_transform(places4326, crs = 25832)
